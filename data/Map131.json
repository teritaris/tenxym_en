{
"autoplayBgm":true,"autoplayBgs":false,"battleback1Name":"","battleback2Name":"","bgm":{"name":"ServerRoom","pan":0,"pitch":100,"volume":90},"bgs":{"name":"","pan":0,"pitch":100,"volume":90},"disableDashing":false,"displayName":"オンチェーンの間","encounterList":[],"encounterStep":30,"height":20,"note":"","parallaxLoopX":false,"parallaxLoopY":false,"parallaxName":"","parallaxShow":true,"parallaxSx":0,"parallaxSy":0,"scrollType":0,"specifyBattleback":false,"tilesetId":3,"width":21,
"data":[1536,1536,1536,1536,1536,1536,1536,1536,1536,1536,1536,1536,1536,1536,1536,1536,1536,1536,1536,1536,1536,1536,1536,7470,7563,7553,7553,7553,7553,7553,7553,7553,7553,7553,7553,7553,7553,7553,7557,7470,1536,1536,1536,1536,7562,7906,7906,7906,7906,7910,6323,6322,6322,6322,6326,7907,7906,7910,6323,7561,7557,1536,1536,1536,1536,7552,7912,7912,7912,7912,7916,6329,6328,6328,6328,6332,7913,7912,7916,6333,7915,7552,1536,1536,1536,1536,7552,4098,4084,4084,4084,4084,4084,4084,4084,4084,4084,4084,4084,4084,4084,4100,7564,1536,1536,1536,1536,7552,4080,4064,4064,4064,4064,4064,4064,4064,4064,4064,4064,4064,4064,4064,4088,7911,1536,1536,1536,1536,7552,4080,4064,4064,4064,4064,4064,4064,4064,4064,4064,4064,4064,4064,4064,4088,7917,1536,1536,1536,1536,7552,4080,4064,4064,4064,4064,4064,4064,4064,4064,4064,4064,4064,4064,4064,4088,4058,1536,1536,1536,1536,7552,4080,4064,4064,4064,4064,4064,4064,4064,4064,4064,4064,4064,4064,4064,4088,4060,1536,1536,1536,1536,7552,4080,4064,4064,4064,4064,4064,4064,4064,4064,4064,4064,4064,4064,4064,4088,7562,1536,1536,1536,1536,7552,4080,4064,4064,4064,4064,4064,4064,4064,4064,4064,4064,4064,4064,4064,4088,7552,1536,1536,1536,1536,7552,4104,4092,4092,4092,4092,4092,4092,4076,4092,4092,4092,4092,4092,4092,4102,7552,1536,1536,1536,1536,7552,3627,3617,3617,3617,3617,3617,3629,4096,3627,3629,7562,3666,3652,3653,3677,7552,1536,1536,1536,1536,7552,4098,4084,4084,4084,4084,4084,4084,4067,4084,4100,7552,3672,3660,3670,7555,7559,1536,1536,1536,1536,7552,4080,4064,4064,4064,4064,4064,4064,4064,4064,4088,7539,7553,7553,7553,7559,7038,1536,1536,1536,1536,7552,4104,4092,4092,4092,4092,4092,4092,4092,4092,4102,7552,6514,6514,6514,6518,6327,1536,1536,1536,1536,7561,7553,7553,7553,7553,7553,7553,7553,7553,7553,7553,7559,6520,6520,6520,6524,6333,1536,1536,1536,1536,6515,6514,6514,6514,6514,6514,6514,6514,6514,6514,6514,6518,1536,1536,1536,1536,1536,1536,1536,1536,1536,6521,6520,6520,6520,6520,6520,6520,6520,6520,6520,6520,6524,1536,1536,1536,1536,1536,1536,1536,1536,1536,1536,1536,1536,1536,1536,1536,1536,1536,1536,1536,1536,1536,1536,1536,1536,1536,1536,1536,1536,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3579,3569,3569,3569,3569,3569,3581,0,3579,3581,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3195,3185,3197,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,429,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,68,0,0,0,0,0,0,90,68,90,0,0,0,0,0,0,0,0,0,0,0,76,0,0,0,0,0,0,0,76,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,464,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,472,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,120,120,120,338,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,336,324,326,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,68,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,76,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,5,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,5,0,0,0,0,5,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,5,0,0,0,0,5,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,5,0,0,0,0,5,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,5,0,0,0,0,5,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,5,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,5,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,5,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,5,0,0,0,0,5,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,5,0,0,0,0,5,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,5,0,0,0,0,5,0,0,0,0,0,0,0,0,0,0,5,0,0,0,0,5,0,0,0,0,5,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,5,0,0,0,0,5,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,5,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,5,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,5,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,5,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
"events":[
null,
{"id":1,"name":"EV001","note":"","pages":[{"conditions":{"actorId":1,"actorValid":false,"itemId":1,"itemValid":false,"selfSwitchCh":"A","selfSwitchValid":false,"switch1Id":1,"switch1Valid":false,"switch2Id":1,"switch2Valid":false,"variableId":1,"variableValid":false,"variableValue":0},"directionFix":false,"image":{"characterIndex":0,"characterName":"","direction":2,"pattern":0,"tileId":0},"list":[{"code":250,"indent":0,"parameters":[{"name":"Move10","volume":90,"pitch":100,"pan":0}]},{"code":201,"indent":0,"parameters":[0,37,5,5,6,0]},{"code":356,"indent":0,"parameters":["namePopCopy -1 \\V[47] 75"]},{"code":356,"indent":0,"parameters":["online 47 to name"]},{"code":0,"indent":0,"parameters":[]}],"moveFrequency":3,"moveRoute":{"list":[{"code":0,"parameters":[]}],"repeat":true,"skippable":false,"wait":false},"moveSpeed":3,"moveType":0,"priorityType":0,"stepAnime":false,"through":false,"trigger":1,"walkAnime":true}],"x":18,"y":7},
{"id":2,"name":"EV002","note":"","pages":[{"conditions":{"actorId":1,"actorValid":false,"itemId":1,"itemValid":false,"selfSwitchCh":"A","selfSwitchValid":false,"switch1Id":1,"switch1Valid":false,"switch2Id":1,"switch2Valid":false,"variableId":1,"variableValid":false,"variableValue":0},"directionFix":false,"image":{"characterIndex":0,"characterName":"","direction":2,"pattern":0,"tileId":0},"list":[{"code":250,"indent":0,"parameters":[{"name":"Move10","volume":90,"pitch":100,"pan":0}]},{"code":201,"indent":0,"parameters":[0,37,5,6,6,0]},{"code":356,"indent":0,"parameters":["namePopCopy -1 \\V[47] 75"]},{"code":356,"indent":0,"parameters":["online 47 to name"]},{"code":0,"indent":0,"parameters":[]}],"moveFrequency":3,"moveRoute":{"list":[{"code":0,"parameters":[]}],"repeat":true,"skippable":false,"wait":false},"moveSpeed":3,"moveType":0,"priorityType":0,"stepAnime":false,"through":false,"trigger":1,"walkAnime":true}],"x":18,"y":8},
{"id":3,"name":"EV003","note":"","pages":[{"conditions":{"actorId":1,"actorValid":false,"itemId":1,"itemValid":false,"selfSwitchCh":"A","selfSwitchValid":false,"switch1Id":1,"switch1Valid":false,"switch2Id":1,"switch2Valid":false,"variableId":1,"variableValid":false,"variableValue":0},"directionFix":true,"image":{"tileId":0,"characterName":"!Flame","direction":6,"pattern":1,"characterIndex":0},"list":[{"code":0,"indent":0,"parameters":[]}],"moveFrequency":3,"moveRoute":{"list":[{"code":0,"parameters":[]}],"repeat":true,"skippable":false,"wait":false},"moveSpeed":3,"moveType":0,"priorityType":1,"stepAnime":true,"through":false,"trigger":0,"walkAnime":true}],"x":8,"y":2},
{"id":4,"name":"EV004","note":"","pages":[{"conditions":{"actorId":1,"actorValid":false,"itemId":1,"itemValid":false,"selfSwitchCh":"A","selfSwitchValid":false,"switch1Id":1,"switch1Valid":false,"switch2Id":1,"switch2Valid":false,"variableId":1,"variableValid":false,"variableValue":0},"directionFix":true,"image":{"tileId":0,"characterName":"!Flame","direction":6,"pattern":1,"characterIndex":0},"list":[{"code":0,"indent":0,"parameters":[]}],"moveFrequency":3,"moveRoute":{"list":[{"code":0,"parameters":[]}],"repeat":true,"skippable":false,"wait":false},"moveSpeed":3,"moveType":0,"priorityType":1,"stepAnime":true,"through":false,"trigger":0,"walkAnime":true}],"x":12,"y":2},
{"id":5,"name":"EV005","note":"","pages":[{"conditions":{"actorId":1,"actorValid":false,"itemId":1,"itemValid":false,"selfSwitchCh":"A","selfSwitchValid":false,"switch1Id":1,"switch1Valid":false,"switch2Id":1,"switch2Valid":false,"variableId":1,"variableValid":false,"variableValue":0},"directionFix":true,"image":{"tileId":0,"characterName":"!Flame","direction":6,"pattern":1,"characterIndex":0},"list":[{"code":0,"indent":0,"parameters":[]}],"moveFrequency":3,"moveRoute":{"list":[{"code":0,"parameters":[]}],"repeat":true,"skippable":false,"wait":false},"moveSpeed":3,"moveType":0,"priorityType":1,"stepAnime":true,"through":false,"trigger":0,"walkAnime":true}],"x":4,"y":2},
{"id":6,"name":"EV006","note":"","pages":[{"conditions":{"actorId":1,"actorValid":false,"itemId":1,"itemValid":false,"selfSwitchCh":"A","selfSwitchValid":false,"switch1Id":1,"switch1Valid":false,"switch2Id":1,"switch2Valid":false,"variableId":1,"variableValid":false,"variableValue":0},"directionFix":true,"image":{"tileId":0,"characterName":"!Flame","direction":6,"pattern":1,"characterIndex":0},"list":[{"code":0,"indent":0,"parameters":[]}],"moveFrequency":3,"moveRoute":{"list":[{"code":0,"parameters":[]}],"repeat":true,"skippable":false,"wait":false},"moveSpeed":3,"moveType":0,"priorityType":1,"stepAnime":true,"through":false,"trigger":0,"walkAnime":true}],"x":16,"y":2},
{"id":7,"name":"EV007","note":"","pages":[{"conditions":{"actorId":1,"actorValid":false,"itemId":1,"itemValid":false,"selfSwitchCh":"A","selfSwitchValid":false,"switch1Id":1,"switch1Valid":false,"switch2Id":1,"switch2Valid":false,"variableId":1,"variableValid":false,"variableValue":0},"directionFix":true,"image":{"tileId":0,"characterName":"!Crystal","direction":2,"pattern":1,"characterIndex":2},"list":[{"code":355,"indent":0,"parameters":["const symbol = require(\"/node_modules/symbol-sdk\"); // browserify使用ツクール向け"]},{"code":655,"indent":0,"parameters":["const NODE_URL = $gameVariables.value(41)"]},{"code":655,"indent":0,"parameters":["const repositoryFactory = new symbol.RepositoryFactoryHttp(NODE_URL);"]},{"code":655,"indent":0,"parameters":["const transactionHttp = repositoryFactory.createTransactionRepository();"]},{"code":655,"indent":0,"parameters":[""]},{"code":655,"indent":0,"parameters":["transactionHttp.search({"]},{"code":655,"indent":0,"parameters":["    group: symbol.TransactionGroup.Confirmed,"]},{"code":655,"indent":0,"parameters":["    order:symbol.Order.Desc,"]},{"code":655,"indent":0,"parameters":["    address:symbol.Address.createFromRawAddress($gameVariables.value(50)),"]},{"code":655,"indent":0,"parameters":["    pageNumber: 1,"]},{"code":655,"indent":0,"parameters":["    pageSize: 30,"]},{"code":655,"indent":0,"parameters":["}).subscribe((page) => messageAnalysis(page.data));"]},{"code":655,"indent":0,"parameters":[""]},{"code":655,"indent":0,"parameters":["async function messageAnalysis(data) {"]},{"code":655,"indent":0,"parameters":["    let message = \"\";"]},{"code":655,"indent":0,"parameters":["    let idx = 0;"]},{"code":655,"indent":0,"parameters":["    let messages = [];"]},{"code":655,"indent":0,"parameters":["    for (tx of data) {"]},{"code":655,"indent":0,"parameters":["        if (tx.hasOwnProperty(\"message\") && tx.message.type === 0) {"]},{"code":655,"indent":0,"parameters":["            messages[idx] = tx.message.payload + \"\\n\";"]},{"code":655,"indent":0,"parameters":["        }"]},{"code":655,"indent":0,"parameters":["        idx++;"]},{"code":655,"indent":0,"parameters":["    }"]},{"code":655,"indent":0,"parameters":["    // メッセージ新しいのが下に来るように並べ替え"]},{"code":655,"indent":0,"parameters":["    messages.reverse();"]},{"code":655,"indent":0,"parameters":["    for (let i in messages) {"]},{"code":655,"indent":0,"parameters":["        message += messages[i];"]},{"code":655,"indent":0,"parameters":["    }"]},{"code":655,"indent":0,"parameters":["    // ツクール変数にセット"]},{"code":655,"indent":0,"parameters":["    $gameVariables.setValue(51, message)"]},{"code":655,"indent":0,"parameters":["}"]},{"code":357,"indent":0,"parameters":["DTextPicture","dText","文字列ピクチャ準備",{"text":"\\V[51]","fontSize":"13"}]},{"code":657,"indent":0,"parameters":["表示文字列 = \\V[51]"]},{"code":657,"indent":0,"parameters":["フォントサイズ = 13"]},{"code":357,"indent":0,"parameters":["DTextPicture","dTextSetting","文字列ピクチャ設定",{"backGroundColor":"","gradationLeft":"","gradationRight":"","realTime":"true","window":"true","align":"","fontFace":"","lineHeight":"0"}]},{"code":657,"indent":0,"parameters":["背景色 = "]},{"code":657,"indent":0,"parameters":["左方向グラデーション = "]},{"code":657,"indent":0,"parameters":["右方向グラデーション = "]},{"code":657,"indent":0,"parameters":["リアルタイム描画 = true"]},{"code":657,"indent":0,"parameters":["ウィンドウ = true"]},{"code":657,"indent":0,"parameters":["揃え = "]},{"code":657,"indent":0,"parameters":["フォント = "]},{"code":657,"indent":0,"parameters":["行の高さ = 0"]},{"code":231,"indent":0,"parameters":[3,"",0,0,0,0,100,100,255,0]},{"code":0,"indent":0,"parameters":[]}],"moveFrequency":3,"moveRoute":{"list":[{"code":0,"parameters":[]}],"repeat":true,"skippable":false,"wait":false},"moveSpeed":3,"moveType":0,"priorityType":1,"stepAnime":false,"through":false,"trigger":0,"walkAnime":false}],"x":10,"y":4},
{"id":8,"name":"EV008","note":"","pages":[{"conditions":{"actorId":1,"actorValid":false,"itemId":1,"itemValid":false,"selfSwitchCh":"A","selfSwitchValid":false,"switch1Id":1,"switch1Valid":false,"switch2Id":1,"switch2Valid":false,"variableId":1,"variableValid":false,"variableValue":0},"directionFix":false,"image":{"characterIndex":0,"characterName":"","direction":2,"pattern":0,"tileId":0},"list":[{"code":235,"indent":0,"parameters":[3]},{"code":0,"indent":0,"parameters":[]}],"moveFrequency":3,"moveRoute":{"list":[{"code":0,"parameters":[]}],"repeat":true,"skippable":false,"wait":false},"moveSpeed":3,"moveType":0,"priorityType":0,"stepAnime":false,"through":false,"trigger":1,"walkAnime":true}],"x":3,"y":10},
{"id":9,"name":"EV009","note":"","pages":[{"conditions":{"actorId":1,"actorValid":false,"itemId":1,"itemValid":false,"selfSwitchCh":"A","selfSwitchValid":false,"switch1Id":1,"switch1Valid":false,"switch2Id":1,"switch2Valid":false,"variableId":1,"variableValid":false,"variableValue":0},"directionFix":false,"image":{"tileId":0,"characterName":"Nature","direction":2,"pattern":1,"characterIndex":5},"list":[{"code":101,"indent":0,"parameters":["Nature",5,0,2,""]},{"code":401,"indent":0,"parameters":["掲示板宛にメッセージを送信するとゲーム内でも"]},{"code":401,"indent":0,"parameters":["表示されるようになるよ。"]},{"code":401,"indent":0,"parameters":["アドレスコピー用のページからアドレスをコピーして"]},{"code":401,"indent":0,"parameters":["送信してみてね。"]},{"code":356,"indent":0,"parameters":["link on https://teritaris.github.io/tenxym/other/info.html 掲示板アドレスコピー用ページ"]},{"code":101,"indent":0,"parameters":["Nature",5,0,2,""]},{"code":401,"indent":0,"parameters":["今使っているブラウザがSafariだと開けないから"]},{"code":401,"indent":0,"parameters":["Chromeでゲームを始めて開いてみてね。"]},{"code":356,"indent":0,"parameters":["link off"]},{"code":0,"indent":0,"parameters":[]}],"moveFrequency":3,"moveRoute":{"list":[{"code":0,"parameters":[]}],"repeat":true,"skippable":false,"wait":false},"moveSpeed":3,"moveType":0,"priorityType":1,"stepAnime":false,"through":false,"trigger":0,"walkAnime":false}],"x":9,"y":4},
{"id":10,"name":"EV010","note":"","pages":[{"conditions":{"actorId":1,"actorValid":false,"itemId":1,"itemValid":false,"selfSwitchCh":"A","selfSwitchValid":false,"switch1Id":1,"switch1Valid":false,"switch2Id":1,"switch2Valid":false,"variableId":1,"variableValid":false,"variableValue":0},"directionFix":false,"image":{"characterIndex":0,"characterName":"","direction":2,"pattern":0,"tileId":0},"list":[{"code":235,"indent":0,"parameters":[3]},{"code":0,"indent":0,"parameters":[]}],"moveFrequency":3,"moveRoute":{"list":[{"code":0,"parameters":[]}],"repeat":true,"skippable":false,"wait":false},"moveSpeed":3,"moveType":0,"priorityType":0,"stepAnime":false,"through":false,"trigger":1,"walkAnime":true}],"x":4,"y":11},
{"id":11,"name":"EV011","note":"","pages":[{"conditions":{"actorId":1,"actorValid":false,"itemId":1,"itemValid":false,"selfSwitchCh":"A","selfSwitchValid":false,"switch1Id":1,"switch1Valid":false,"switch2Id":1,"switch2Valid":false,"variableId":1,"variableValid":false,"variableValue":0},"directionFix":true,"image":{"tileId":0,"characterName":"!Crystal","direction":2,"pattern":1,"characterIndex":3},"list":[{"code":355,"indent":0,"parameters":["const symbol = require(\"/node_modules/symbol-sdk\"); // browserify使用ツクール向け"]},{"code":655,"indent":0,"parameters":["const NODE_URL = 'https://sym-test-01.opening-line.jp:3001';"]},{"code":655,"indent":0,"parameters":["const repositoryFactory = new symbol.RepositoryFactoryHttp(NODE_URL);"]},{"code":655,"indent":0,"parameters":["const transactionHttp = repositoryFactory.createTransactionRepository();"]},{"code":655,"indent":0,"parameters":[""]},{"code":655,"indent":0,"parameters":["transactionHttp.search({"]},{"code":655,"indent":0,"parameters":["    group: symbol.TransactionGroup.Confirmed,"]},{"code":655,"indent":0,"parameters":["    order:symbol.Order.Desc,"]},{"code":655,"indent":0,"parameters":["    address:symbol.Address.createFromRawAddress(\"TDDBLO5JK7YEYI3ABXVLBH3GRKWXFNOMHI72ADI\"),"]},{"code":655,"indent":0,"parameters":["    pageNumber: 1,"]},{"code":655,"indent":0,"parameters":["    pageSize: 30,"]},{"code":655,"indent":0,"parameters":["}).subscribe((page) => messageAnalysis(page.data));"]},{"code":655,"indent":0,"parameters":[""]},{"code":655,"indent":0,"parameters":["async function messageAnalysis(data) {"]},{"code":655,"indent":0,"parameters":["    let message = \"\";"]},{"code":655,"indent":0,"parameters":["    let idx = 0;"]},{"code":655,"indent":0,"parameters":["    let messages = [];"]},{"code":655,"indent":0,"parameters":["    for (tx of data) {"]},{"code":655,"indent":0,"parameters":["        if (tx.hasOwnProperty(\"message\") && tx.message.type === 0) {"]},{"code":655,"indent":0,"parameters":["            messages[idx] = tx.message.payload + \"\\n\";"]},{"code":655,"indent":0,"parameters":["        }"]},{"code":655,"indent":0,"parameters":["        idx++;"]},{"code":655,"indent":0,"parameters":["    }"]},{"code":655,"indent":0,"parameters":["    // メッセージ新しいのが下に来るように並べ替え"]},{"code":655,"indent":0,"parameters":["    messages.reverse();"]},{"code":655,"indent":0,"parameters":["    for (let i in messages) {"]},{"code":655,"indent":0,"parameters":["        message += messages[i];"]},{"code":655,"indent":0,"parameters":["    }"]},{"code":655,"indent":0,"parameters":["    // ツクール変数にセット"]},{"code":655,"indent":0,"parameters":["    $gameVariables.setValue(51, message)"]},{"code":655,"indent":0,"parameters":["}"]},{"code":357,"indent":0,"parameters":["DTextPicture","dText","文字列ピクチャ準備",{"text":"\\V[51]","fontSize":"13"}]},{"code":657,"indent":0,"parameters":["表示文字列 = \\V[51]"]},{"code":657,"indent":0,"parameters":["フォントサイズ = 13"]},{"code":357,"indent":0,"parameters":["DTextPicture","dTextSetting","文字列ピクチャ設定",{"backGroundColor":"","gradationLeft":"","gradationRight":"","realTime":"true","window":"true","align":"","fontFace":"","lineHeight":"0"}]},{"code":657,"indent":0,"parameters":["背景色 = "]},{"code":657,"indent":0,"parameters":["左方向グラデーション = "]},{"code":657,"indent":0,"parameters":["右方向グラデーション = "]},{"code":657,"indent":0,"parameters":["リアルタイム描画 = true"]},{"code":657,"indent":0,"parameters":["ウィンドウ = true"]},{"code":657,"indent":0,"parameters":["揃え = "]},{"code":657,"indent":0,"parameters":["フォント = "]},{"code":657,"indent":0,"parameters":["行の高さ = 0"]},{"code":231,"indent":0,"parameters":[3,"",0,0,0,0,100,100,255,0]},{"code":0,"indent":0,"parameters":[]}],"moveFrequency":3,"moveRoute":{"list":[{"code":0,"parameters":[]}],"repeat":true,"skippable":false,"wait":false},"moveSpeed":3,"moveType":0,"priorityType":1,"stepAnime":false,"through":false,"trigger":0,"walkAnime":false}],"x":4,"y":9},
{"id":12,"name":"EV012","note":"","pages":[{"conditions":{"actorId":1,"actorValid":false,"itemId":1,"itemValid":false,"selfSwitchCh":"A","selfSwitchValid":false,"switch1Id":1,"switch1Valid":false,"switch2Id":1,"switch2Valid":false,"variableId":1,"variableValid":false,"variableValue":0},"directionFix":false,"image":{"characterIndex":0,"characterName":"","direction":2,"pattern":0,"tileId":0},"list":[{"code":101,"indent":0,"parameters":["",0,0,2,""]},{"code":401,"indent":0,"parameters":["メッセージを書き込みますか？"]},{"code":102,"indent":0,"parameters":[["はい","いいえ"],1,0,2,0]},{"code":402,"indent":0,"parameters":[0,"はい"]},{"code":357,"indent":1,"parameters":["111_InputForm","show","文字入力の処理",{"target_x":"350","target_y":"200","variables_id":"52","max_count":"300","if_switch_id":"","button_x":"0","button_y":"50","unit_font_size":"24","placeholder":""}]},{"code":657,"indent":1,"parameters":["入力欄のX位置 = 350"]},{"code":657,"indent":1,"parameters":["入力欄のY位置 = 200"]},{"code":657,"indent":1,"parameters":["入力結果の代入先 = 52"]},{"code":657,"indent":1,"parameters":["最大文字数 = 300"]},{"code":657,"indent":1,"parameters":["ONのとき入力を強制終了 = "]},{"code":657,"indent":1,"parameters":["決定ボタンの相対X位置 = 0"]},{"code":657,"indent":1,"parameters":["決定ボタンの相対Y位置 = 50"]},{"code":657,"indent":1,"parameters":["文字サイズ = 24"]},{"code":657,"indent":1,"parameters":["入力欄の初期値 = "]},{"code":355,"indent":1,"parameters":["// 参照しているものがスイッチと変数であること注意"]},{"code":655,"indent":1,"parameters":["// メッセージ入力フラグ最初はオフ"]},{"code":655,"indent":1,"parameters":["$gameSwitches.setValue(26, false)"]},{"code":655,"indent":1,"parameters":["if ($gameVariables.value(52) != 0) {"]},{"code":655,"indent":1,"parameters":["    // メッセージが空入力でない場合はフラグオン"]},{"code":655,"indent":1,"parameters":["    $gameSwitches.setValue(26, true)"]},{"code":655,"indent":1,"parameters":["}"]},{"code":108,"indent":1,"parameters":["メッセージ未入力の場合はイベント会話終了"]},{"code":111,"indent":1,"parameters":[0,26,1]},{"code":115,"indent":2,"parameters":[]},{"code":0,"indent":2,"parameters":[]},{"code":412,"indent":1,"parameters":[]},{"code":101,"indent":1,"parameters":["",0,0,2,""]},{"code":401,"indent":1,"parameters":["下記でよろしいですか？名前は冒険者名が付与されます。"]},{"code":401,"indent":1,"parameters":["\\V[52] By\\ \\V[47]"]},{"code":102,"indent":1,"parameters":[["はい","いいえ"],1,0,2,0]},{"code":402,"indent":1,"parameters":[0,"はい"]},{"code":355,"indent":2,"parameters":["const symbol = require(\"/node_modules/symbol-sdk\");"]},{"code":655,"indent":2,"parameters":["const NODE_URL = 'https://sym-test-01.opening-line.jp:3001';"]},{"code":655,"indent":2,"parameters":["const GENERATION_HASH = '7FCCD304802016BEBBCD342A332F91FF1F3BB5E902988B352697BE245F48E836';"]},{"code":655,"indent":2,"parameters":["const EPOCH_ADJUSTMENT = 1637848847;"]},{"code":655,"indent":2,"parameters":["const networkType = symbol.NetworkType.TEST_NET;"]},{"code":655,"indent":2,"parameters":["const privateKey = \"25E553FD09F15DD430569BFBD2239F7156BA9F7D1E210382C10E2BB5494FAED3\";"]},{"code":655,"indent":2,"parameters":["const account = symbol.Account.createFromPrivateKey(privateKey, networkType);"]},{"code":655,"indent":2,"parameters":[""]},{"code":655,"indent":2,"parameters":["// トランザクション作成"]},{"code":655,"indent":2,"parameters":["let tx = symbol.TransferTransaction.create("]},{"code":655,"indent":2,"parameters":["    symbol.Deadline.create(EPOCH_ADJUSTMENT),"]},{"code":655,"indent":2,"parameters":["    symbol.Address.createFromRawAddress(\"TDDBLO5JK7YEYI3ABXVLBH3GRKWXFNOMHI72ADI\"),"]},{"code":655,"indent":2,"parameters":["    [new symbol.Mosaic(new symbol.MosaicId('3A8416DB2D53B6C8'), symbol.UInt64.fromUint(0))],"]},{"code":655,"indent":2,"parameters":["    symbol.PlainMessage.create($gameVariables.value(52) + \" by \" + $gameVariables.value(47)), // 入力メッセージ+冒険者名"]},{"code":655,"indent":2,"parameters":["    networkType,"]},{"code":655,"indent":2,"parameters":["    symbol.UInt64.fromUint(1000000)"]},{"code":655,"indent":2,"parameters":[");"]},{"code":655,"indent":2,"parameters":["// 署名"]},{"code":655,"indent":2,"parameters":["let signedTx = account.sign(tx, GENERATION_HASH);"]},{"code":655,"indent":2,"parameters":["// 送信"]},{"code":655,"indent":2,"parameters":["new symbol.TransactionHttp(NODE_URL)"]},{"code":655,"indent":2,"parameters":["    .announce(signedTx)"]},{"code":655,"indent":2,"parameters":["    .subscribe((x) => console.log(x), (err) => console.error(err))"]},{"code":250,"indent":2,"parameters":[{"name":"txAnnounce","volume":90,"pitch":100,"pan":0}]},{"code":0,"indent":2,"parameters":[]},{"code":402,"indent":1,"parameters":[1,"いいえ"]},{"code":0,"indent":2,"parameters":[]},{"code":404,"indent":1,"parameters":[]},{"code":0,"indent":1,"parameters":[]},{"code":402,"indent":0,"parameters":[1,"いいえ"]},{"code":0,"indent":1,"parameters":[]},{"code":404,"indent":0,"parameters":[]},{"code":0,"indent":0,"parameters":[]}],"moveFrequency":3,"moveRoute":{"list":[{"code":0,"parameters":[]}],"repeat":true,"skippable":false,"wait":false},"moveSpeed":3,"moveType":0,"priorityType":1,"stepAnime":false,"through":false,"trigger":0,"walkAnime":true}],"x":5,"y":9},
{"id":13,"name":"EV013","note":"","pages":[{"conditions":{"actorId":1,"actorValid":false,"itemId":1,"itemValid":false,"selfSwitchCh":"A","selfSwitchValid":false,"switch1Id":1,"switch1Valid":false,"switch2Id":1,"switch2Valid":false,"variableId":1,"variableValid":false,"variableValue":0},"directionFix":false,"image":{"tileId":0,"characterName":"Nature","direction":2,"pattern":1,"characterIndex":5},"list":[{"code":101,"indent":0,"parameters":["Nature",5,0,2,""]},{"code":401,"indent":0,"parameters":["掲示板宛にメッセージを送信するとゲーム内でも"]},{"code":401,"indent":0,"parameters":["表示されるようになるよ。"]},{"code":401,"indent":0,"parameters":["こっちはテストネットでゲーム内からの送信に"]},{"code":401,"indent":0,"parameters":["対応しているよ。"]},{"code":101,"indent":0,"parameters":["Nature",5,0,2,""]},{"code":401,"indent":0,"parameters":["右側の石碑からメッセージを送信してね。"]},{"code":401,"indent":0,"parameters":["メッセージ末尾に自動的に冒険者名が付与されるよ。"]},{"code":0,"indent":0,"parameters":[]}],"moveFrequency":3,"moveRoute":{"list":[{"code":0,"parameters":[]}],"repeat":true,"skippable":false,"wait":false},"moveSpeed":3,"moveType":0,"priorityType":1,"stepAnime":false,"through":false,"trigger":0,"walkAnime":false}],"x":6,"y":9},
{"id":14,"name":"EV014","note":"","pages":[{"conditions":{"actorId":1,"actorValid":false,"itemId":1,"itemValid":false,"selfSwitchCh":"A","selfSwitchValid":false,"switch1Id":1,"switch1Valid":false,"switch2Id":1,"switch2Valid":false,"variableId":1,"variableValid":false,"variableValue":0},"directionFix":false,"image":{"characterIndex":0,"characterName":"","direction":2,"pattern":0,"tileId":0},"list":[{"code":235,"indent":0,"parameters":[3]},{"code":0,"indent":0,"parameters":[]}],"moveFrequency":3,"moveRoute":{"list":[{"code":0,"parameters":[]}],"repeat":true,"skippable":false,"wait":false},"moveSpeed":3,"moveType":0,"priorityType":0,"stepAnime":false,"through":false,"trigger":1,"walkAnime":true}],"x":3,"y":8},
{"id":15,"name":"EV015","note":"","pages":[{"conditions":{"actorId":1,"actorValid":false,"itemId":1,"itemValid":false,"selfSwitchCh":"A","selfSwitchValid":false,"switch1Id":1,"switch1Valid":false,"switch2Id":1,"switch2Valid":false,"variableId":1,"variableValid":false,"variableValue":0},"directionFix":false,"image":{"characterIndex":0,"characterName":"","direction":2,"pattern":0,"tileId":0},"list":[{"code":231,"indent":0,"parameters":[1,"chat",0,0,760,70,100,100,255,0]},{"code":231,"indent":0,"parameters":[2,"jump",0,0,760,140,15,15,255,0]},{"code":357,"indent":0,"parameters":["PictureCallCommon","ADD_PICTURE_EVENT","ピクチャイベント登録",{"pictureId":"1","commonEventId":"0","switchId":"0","buttonBind":"shift","triggerType":"1","invalidSwitchId":"0"}]},{"code":657,"indent":0,"parameters":["ピクチャ番号 = 1"]},{"code":657,"indent":0,"parameters":["コモンイベント番号 = 0"]},{"code":657,"indent":0,"parameters":["スイッチ番号 = 0"]},{"code":657,"indent":0,"parameters":["ボタンバインド = shift"]},{"code":657,"indent":0,"parameters":["トリガー種別 = 1"]},{"code":657,"indent":0,"parameters":["無効スイッチ = 0"]},{"code":357,"indent":0,"parameters":["PictureCallCommon","ADD_PICTURE_EVENT","ピクチャイベント登録",{"pictureId":"2","commonEventId":"0","switchId":"0","buttonBind":"pageup","triggerType":"1","invalidSwitchId":"0"}]},{"code":657,"indent":0,"parameters":["ピクチャ番号 = 2"]},{"code":657,"indent":0,"parameters":["コモンイベント番号 = 0"]},{"code":657,"indent":0,"parameters":["スイッチ番号 = 0"]},{"code":657,"indent":0,"parameters":["ボタンバインド = pageup"]},{"code":657,"indent":0,"parameters":["トリガー種別 = 1"]},{"code":657,"indent":0,"parameters":["無効スイッチ = 0"]},{"code":214,"indent":0,"parameters":[]},{"code":0,"indent":0,"parameters":[]}],"moveFrequency":3,"moveRoute":{"list":[{"code":0,"parameters":[]}],"repeat":true,"skippable":false,"wait":false},"moveSpeed":3,"moveType":0,"priorityType":0,"stepAnime":false,"through":false,"trigger":3,"walkAnime":true}],"x":18,"y":14},
{"id":16,"name":"EV016","note":"","pages":[{"conditions":{"actorId":1,"actorValid":false,"itemId":1,"itemValid":false,"selfSwitchCh":"A","selfSwitchValid":false,"switch1Id":1,"switch1Valid":false,"switch2Id":1,"switch2Valid":false,"variableId":1,"variableValid":false,"variableValue":0},"directionFix":false,"image":{"characterIndex":0,"characterName":"","direction":2,"pattern":0,"tileId":0},"list":[{"code":235,"indent":0,"parameters":[3]},{"code":0,"indent":0,"parameters":[]}],"moveFrequency":3,"moveRoute":{"list":[{"code":0,"parameters":[]}],"repeat":true,"skippable":false,"wait":false},"moveSpeed":3,"moveType":0,"priorityType":0,"stepAnime":false,"through":false,"trigger":1,"walkAnime":true}],"x":5,"y":10},
{"id":17,"name":"EV017","note":"","pages":[{"conditions":{"actorId":1,"actorValid":false,"itemId":1,"itemValid":false,"selfSwitchCh":"A","selfSwitchValid":false,"switch1Id":1,"switch1Valid":false,"switch2Id":1,"switch2Valid":false,"variableId":1,"variableValid":false,"variableValue":0},"directionFix":false,"image":{"characterIndex":0,"characterName":"","direction":2,"pattern":0,"tileId":0},"list":[{"code":235,"indent":0,"parameters":[3]},{"code":0,"indent":0,"parameters":[]}],"moveFrequency":3,"moveRoute":{"list":[{"code":0,"parameters":[]}],"repeat":true,"skippable":false,"wait":false},"moveSpeed":3,"moveType":0,"priorityType":0,"stepAnime":false,"through":false,"trigger":1,"walkAnime":true}],"x":4,"y":7},
{"id":18,"name":"EV018","note":"","pages":[{"conditions":{"actorId":1,"actorValid":false,"itemId":1,"itemValid":false,"selfSwitchCh":"A","selfSwitchValid":false,"switch1Id":1,"switch1Valid":false,"switch2Id":1,"switch2Valid":false,"variableId":1,"variableValid":false,"variableValue":0},"directionFix":false,"image":{"characterIndex":0,"characterName":"","direction":2,"pattern":0,"tileId":0},"list":[{"code":235,"indent":0,"parameters":[3]},{"code":0,"indent":0,"parameters":[]}],"moveFrequency":3,"moveRoute":{"list":[{"code":0,"parameters":[]}],"repeat":true,"skippable":false,"wait":false},"moveSpeed":3,"moveType":0,"priorityType":0,"stepAnime":false,"through":false,"trigger":1,"walkAnime":true}],"x":5,"y":8},
{"id":19,"name":"EV019","note":"","pages":[{"conditions":{"actorId":1,"actorValid":false,"itemId":1,"itemValid":false,"selfSwitchCh":"A","selfSwitchValid":false,"switch1Id":1,"switch1Valid":false,"switch2Id":1,"switch2Valid":false,"variableId":1,"variableValid":false,"variableValue":0},"directionFix":false,"image":{"characterIndex":0,"characterName":"","direction":2,"pattern":0,"tileId":0},"list":[{"code":235,"indent":0,"parameters":[3]},{"code":0,"indent":0,"parameters":[]}],"moveFrequency":3,"moveRoute":{"list":[{"code":0,"parameters":[]}],"repeat":true,"skippable":false,"wait":false},"moveSpeed":3,"moveType":0,"priorityType":0,"stepAnime":false,"through":false,"trigger":1,"walkAnime":true}],"x":11,"y":5},
{"id":20,"name":"EV020","note":"","pages":[{"conditions":{"actorId":1,"actorValid":false,"itemId":1,"itemValid":false,"selfSwitchCh":"A","selfSwitchValid":false,"switch1Id":1,"switch1Valid":false,"switch2Id":1,"switch2Valid":false,"variableId":1,"variableValid":false,"variableValue":0},"directionFix":false,"image":{"characterIndex":0,"characterName":"","direction":2,"pattern":0,"tileId":0},"list":[{"code":235,"indent":0,"parameters":[3]},{"code":0,"indent":0,"parameters":[]}],"moveFrequency":3,"moveRoute":{"list":[{"code":0,"parameters":[]}],"repeat":true,"skippable":false,"wait":false},"moveSpeed":3,"moveType":0,"priorityType":0,"stepAnime":false,"through":false,"trigger":1,"walkAnime":true}],"x":9,"y":5},
{"id":21,"name":"EV021","note":"","pages":[{"conditions":{"actorId":1,"actorValid":false,"itemId":1,"itemValid":false,"selfSwitchCh":"A","selfSwitchValid":false,"switch1Id":1,"switch1Valid":false,"switch2Id":1,"switch2Valid":false,"variableId":1,"variableValid":false,"variableValue":0},"directionFix":false,"image":{"characterIndex":0,"characterName":"","direction":2,"pattern":0,"tileId":0},"list":[{"code":235,"indent":0,"parameters":[3]},{"code":0,"indent":0,"parameters":[]}],"moveFrequency":3,"moveRoute":{"list":[{"code":0,"parameters":[]}],"repeat":true,"skippable":false,"wait":false},"moveSpeed":3,"moveType":0,"priorityType":0,"stepAnime":false,"through":false,"trigger":1,"walkAnime":true}],"x":10,"y":6},
{"id":22,"name":"EV022","note":"","pages":[{"conditions":{"actorId":1,"actorValid":false,"itemId":1,"itemValid":false,"selfSwitchCh":"A","selfSwitchValid":false,"switch1Id":1,"switch1Valid":false,"switch2Id":1,"switch2Valid":false,"variableId":1,"variableValid":false,"variableValue":0},"directionFix":false,"image":{"characterIndex":0,"characterName":"","direction":2,"pattern":0,"tileId":0},"list":[{"code":235,"indent":0,"parameters":[3]},{"code":0,"indent":0,"parameters":[]}],"moveFrequency":3,"moveRoute":{"list":[{"code":0,"parameters":[]}],"repeat":true,"skippable":false,"wait":false},"moveSpeed":3,"moveType":0,"priorityType":0,"stepAnime":false,"through":false,"trigger":1,"walkAnime":true}],"x":12,"y":4},
{"id":23,"name":"EV023","note":"","pages":[{"conditions":{"actorId":1,"actorValid":false,"itemId":1,"itemValid":false,"selfSwitchCh":"A","selfSwitchValid":false,"switch1Id":1,"switch1Valid":false,"switch2Id":1,"switch2Valid":false,"variableId":1,"variableValid":false,"variableValue":0},"directionFix":false,"image":{"tileId":0,"characterName":"Nature","direction":2,"pattern":1,"characterIndex":5},"list":[{"code":101,"indent":0,"parameters":["Nature",5,0,2,""]},{"code":401,"indent":0,"parameters":["ここではハーベストの設定ができるよ。"]},{"code":401,"indent":0,"parameters":["やってみる？"]},{"code":102,"indent":0,"parameters":[["はい","いいえ"],1,0,2,0]},{"code":402,"indent":0,"parameters":[0,"はい"]},{"code":101,"indent":1,"parameters":["",0,0,2,""]},{"code":401,"indent":1,"parameters":["委任先ノードを入力してください。"]},{"code":401,"indent":1,"parameters":["「https://」や「:3001」は不要です。"]},{"code":401,"indent":1,"parameters":["httpsのみ対応です。"]},{"code":401,"indent":1,"parameters":["例）sym-test-01.opening-line.jp"]},{"code":101,"indent":1,"parameters":["",0,0,2,""]},{"code":401,"indent":1,"parameters":["存在しないノードの場合エラーが発生する場合があります。"]},{"code":401,"indent":1,"parameters":["ご注意ください。"]},{"code":355,"indent":1,"parameters":["// 元々入力されている委任ノードを退避"]},{"code":655,"indent":1,"parameters":["$gameVariables.setValue(56, $gameVariables.value(55))"]},{"code":357,"indent":1,"parameters":["111_InputForm","show","文字入力の処理",{"target_x":"350","target_y":"200","variables_id":"55","max_count":"300","if_switch_id":"","button_x":"0","button_y":"50","unit_font_size":"24","placeholder":""}]},{"code":657,"indent":1,"parameters":["入力欄のX位置 = 350"]},{"code":657,"indent":1,"parameters":["入力欄のY位置 = 200"]},{"code":657,"indent":1,"parameters":["入力結果の代入先 = 55"]},{"code":657,"indent":1,"parameters":["最大文字数 = 300"]},{"code":657,"indent":1,"parameters":["ONのとき入力を強制終了 = "]},{"code":657,"indent":1,"parameters":["決定ボタンの相対X位置 = 0"]},{"code":657,"indent":1,"parameters":["決定ボタンの相対Y位置 = 50"]},{"code":657,"indent":1,"parameters":["文字サイズ = 24"]},{"code":657,"indent":1,"parameters":["入力欄の初期値 = "]},{"code":355,"indent":1,"parameters":["// なんらかが入力されたかチェック"]},{"code":655,"indent":1,"parameters":["$gameSwitches.setValue(29, false)"]},{"code":655,"indent":1,"parameters":["if($gameVariables.value(55) != 0){"]},{"code":655,"indent":1,"parameters":["    // されてたら会話継続フラグON"]},{"code":655,"indent":1,"parameters":["    $gameSwitches.setValue(29, true)"]},{"code":655,"indent":1,"parameters":["}"]},{"code":111,"indent":1,"parameters":[0,29,1]},{"code":108,"indent":2,"parameters":["入力がなかったら変更前の値をセットして会話終了"]},{"code":355,"indent":2,"parameters":["$gameVariables.setValue(55, $gameVariables.value(56))"]},{"code":115,"indent":2,"parameters":[]},{"code":0,"indent":2,"parameters":[]},{"code":412,"indent":1,"parameters":[]},{"code":355,"indent":1,"parameters":["hervest()"]},{"code":655,"indent":1,"parameters":[""]},{"code":655,"indent":1,"parameters":["async function hervest (){"]},{"code":655,"indent":1,"parameters":["    const symbolSdk = await require('/node_modules/symbol-sdk');"]},{"code":655,"indent":1,"parameters":[""]},{"code":655,"indent":1,"parameters":["    // 情報取得のために接続するノード"]},{"code":655,"indent":1,"parameters":["    const node = \"https://sym-test-01.opening-line.jp:3001\";"]},{"code":655,"indent":1,"parameters":["    const networkType = symbolSdk.NetworkType.TEST_NET;"]},{"code":655,"indent":1,"parameters":[""]},{"code":655,"indent":1,"parameters":["    const repositoryFactory = new symbolSdk.RepositoryFactoryHttp(node);"]},{"code":655,"indent":1,"parameters":["    const transactionRepository = repositoryFactory.createTransactionRepository();"]},{"code":655,"indent":1,"parameters":["    const networkRepository = repositoryFactory.createNetworkRepository();"]},{"code":655,"indent":1,"parameters":["    const accountRepository = repositoryFactory.createAccountRepository();"]},{"code":655,"indent":1,"parameters":["    let networkGenerationHash = null;"]},{"code":655,"indent":1,"parameters":["    let medianFeeMultiplier = null;"]},{"code":655,"indent":1,"parameters":["    let epochAdjustment = null;"]},{"code":655,"indent":1,"parameters":["    let signedTransaction = null;"]},{"code":655,"indent":1,"parameters":[""]},{"code":655,"indent":1,"parameters":["    // GenerationHashの取得"]},{"code":655,"indent":1,"parameters":["    networkGenerationHash = await repositoryFactory.getGenerationHash().toPromise();"]},{"code":655,"indent":1,"parameters":["    // 最小手数料係数を取得"]},{"code":655,"indent":1,"parameters":["    medianFeeMultiplier = (await networkRepository.getTransactionFees().toPromise()).medianFeeMultiplier;"]},{"code":655,"indent":1,"parameters":[""]},{"code":655,"indent":1,"parameters":["    // 委任先ノード"]},{"code":655,"indent":1,"parameters":["    // const delegateNode = 'sym-test-01.opening-line.jp'; // ツクールで取得"]},{"code":655,"indent":1,"parameters":["    const delegateNode = $gameVariables.value(55); // ツクールで取得"]},{"code":655,"indent":1,"parameters":["    const delegateNodeUrl = 'https://' + delegateNode + ':3001'"]},{"code":655,"indent":1,"parameters":[""]},{"code":655,"indent":1,"parameters":["    // デリゲートハーベストを行うメインアカウント"]},{"code":655,"indent":1,"parameters":["    // const privateKey ="]},{"code":655,"indent":1,"parameters":["    //     'EE59AE723F6DC1BF4192997AC4D8FA2B0BBE015840ED8810AF8F2764E6D125D7'; // ツクールで取得用"]},{"code":655,"indent":1,"parameters":["    const privateKey = $gameVariables.value(54); // ツクールで取得用"]},{"code":655,"indent":1,"parameters":[""]},{"code":655,"indent":1,"parameters":[""]},{"code":655,"indent":1,"parameters":["    const account = symbolSdk.Account.createFromPrivateKey(privateKey, networkType);"]},{"code":655,"indent":1,"parameters":["    const accountInfo = await accountRepository.getAccountInfo(account.address).toPromise();"]},{"code":655,"indent":1,"parameters":[""]},{"code":655,"indent":1,"parameters":["    let transactionList = [];"]},{"code":655,"indent":1,"parameters":[""]},{"code":655,"indent":1,"parameters":["    //ノードのパプリックキーを取得"]},{"code":655,"indent":1,"parameters":["    const nodeHttp = new symbolSdk.NodeHttp(delegateNodeUrl);"]},{"code":655,"indent":1,"parameters":["    const nodeInfo = await nodeHttp.getNodeInfo().toPromise();"]},{"code":655,"indent":1,"parameters":[""]},{"code":655,"indent":1,"parameters":["    // epochAdjustmentの取得"]},{"code":655,"indent":1,"parameters":["    epochAdjustment = await repositoryFactory.getEpochAdjustment().toPromise();"]},{"code":655,"indent":1,"parameters":[""]},{"code":655,"indent":1,"parameters":["    //リモートアカウントの生成"]},{"code":655,"indent":1,"parameters":["    const remoteAccount = symbolSdk.Account.generateNewAccount(networkType);"]},{"code":655,"indent":1,"parameters":["    //VRFアカウントの生成"]},{"code":655,"indent":1,"parameters":["    const vrfAccount = symbolSdk.Account.generateNewAccount(networkType);"]},{"code":655,"indent":1,"parameters":[""]},{"code":655,"indent":1,"parameters":[""]},{"code":655,"indent":1,"parameters":["    //委任しているようであれば解除トランザクション作成"]},{"code":655,"indent":1,"parameters":["    if(accountInfo.supplementalPublicKeys.linked){"]},{"code":655,"indent":1,"parameters":["        //AccountKeyLinkTransaction （解除）"]},{"code":655,"indent":1,"parameters":["        const accountUnLinkTransaction = symbolSdk.AccountKeyLinkTransaction.create("]},{"code":655,"indent":1,"parameters":["            symbolSdk.Deadline.create(epochAdjustment),"]},{"code":655,"indent":1,"parameters":["            accountInfo.supplementalPublicKeys.linked.publicKey,"]},{"code":655,"indent":1,"parameters":["            symbolSdk.LinkAction.Unlink,"]},{"code":655,"indent":1,"parameters":["            networkType,"]},{"code":655,"indent":1,"parameters":["        );"]},{"code":655,"indent":1,"parameters":["        transactionList.push(accountUnLinkTransaction.toAggregate(account.publicAccount));"]},{"code":655,"indent":1,"parameters":["    }"]},{"code":655,"indent":1,"parameters":[""]},{"code":655,"indent":1,"parameters":["    if(accountInfo.supplementalPublicKeys.vrf){"]},{"code":655,"indent":1,"parameters":["        //VrfKeyLinkTransaction （解除）"]},{"code":655,"indent":1,"parameters":["        const vrfUnLinkTransaction = symbolSdk.VrfKeyLinkTransaction.create("]},{"code":655,"indent":1,"parameters":["            symbolSdk.Deadline.create(epochAdjustment),"]},{"code":655,"indent":1,"parameters":["            accountInfo.supplementalPublicKeys.vrf.publicKey,"]},{"code":655,"indent":1,"parameters":["            symbolSdk.LinkAction.Unlink,"]},{"code":655,"indent":1,"parameters":["            networkType,"]},{"code":655,"indent":1,"parameters":["        );"]},{"code":655,"indent":1,"parameters":["        transactionList.push(vrfUnLinkTransaction.toAggregate(account.publicAccount));"]},{"code":655,"indent":1,"parameters":["    }"]},{"code":655,"indent":1,"parameters":[""]},{"code":655,"indent":1,"parameters":["    if(accountInfo.supplementalPublicKeys.node){"]},{"code":655,"indent":1,"parameters":["        //NodeKeyLinkTransaction （解除）"]},{"code":655,"indent":1,"parameters":["        const nodeUnLinkTransaction = symbolSdk.NodeKeyLinkTransaction.create("]},{"code":655,"indent":1,"parameters":["            symbolSdk.Deadline.create(epochAdjustment),"]},{"code":655,"indent":1,"parameters":["            accountInfo.supplementalPublicKeys.node.publicKey,"]},{"code":655,"indent":1,"parameters":["            symbolSdk.LinkAction.Unlink,"]},{"code":655,"indent":1,"parameters":["            networkType,"]},{"code":655,"indent":1,"parameters":["        );"]},{"code":655,"indent":1,"parameters":["        transactionList.push(nodeUnLinkTransaction.toAggregate(account.publicAccount));"]},{"code":655,"indent":1,"parameters":["    }"]},{"code":655,"indent":1,"parameters":[""]},{"code":655,"indent":1,"parameters":["    //AccountKeyLinkTransaction （リンク）"]},{"code":655,"indent":1,"parameters":["    const accountLinkTransaction = symbolSdk.AccountKeyLinkTransaction.create("]},{"code":655,"indent":1,"parameters":["        symbolSdk.Deadline.create(epochAdjustment),"]},{"code":655,"indent":1,"parameters":["        remoteAccount.publicKey,"]},{"code":655,"indent":1,"parameters":["        symbolSdk.LinkAction.Link,"]},{"code":655,"indent":1,"parameters":["        networkType,"]},{"code":655,"indent":1,"parameters":["    );"]},{"code":655,"indent":1,"parameters":["    transactionList.push(accountLinkTransaction.toAggregate(account.publicAccount));"]},{"code":655,"indent":1,"parameters":[""]},{"code":655,"indent":1,"parameters":["    //VrfKeyLinkTransaction （リンク）"]},{"code":655,"indent":1,"parameters":["    const vrfLinkTransaction = symbolSdk.VrfKeyLinkTransaction.create("]},{"code":655,"indent":1,"parameters":["        symbolSdk.Deadline.create(epochAdjustment),"]},{"code":655,"indent":1,"parameters":["        vrfAccount.publicKey,"]},{"code":655,"indent":1,"parameters":["        symbolSdk.LinkAction.Link,"]},{"code":655,"indent":1,"parameters":["        networkType,"]},{"code":655,"indent":1,"parameters":["    );"]},{"code":655,"indent":1,"parameters":["    transactionList.push(vrfLinkTransaction.toAggregate(account.publicAccount));"]},{"code":655,"indent":1,"parameters":[""]},{"code":655,"indent":1,"parameters":["    //NodeKeyLinkTransaction （リンク）"]},{"code":655,"indent":1,"parameters":["    const nodeLinkTransaction = symbolSdk.NodeKeyLinkTransaction.create("]},{"code":655,"indent":1,"parameters":["        symbolSdk.Deadline.create(epochAdjustment),"]},{"code":655,"indent":1,"parameters":["        nodeInfo.nodePublicKey,"]},{"code":655,"indent":1,"parameters":["        symbolSdk.LinkAction.Link,"]},{"code":655,"indent":1,"parameters":["        networkType,"]},{"code":655,"indent":1,"parameters":["    );"]},{"code":655,"indent":1,"parameters":["    transactionList.push(nodeLinkTransaction.toAggregate(account.publicAccount));"]},{"code":655,"indent":1,"parameters":[""]},{"code":655,"indent":1,"parameters":["    //PersistentDelegationRequestTransactionを作成"]},{"code":655,"indent":1,"parameters":["    const persistentDelegationRequestTransaction = symbolSdk.PersistentDelegationRequestTransaction.createPersistentDelegationRequestTransaction("]},{"code":655,"indent":1,"parameters":["        symbolSdk.Deadline.create(epochAdjustment),"]},{"code":655,"indent":1,"parameters":["        remoteAccount.privateKey,"]},{"code":655,"indent":1,"parameters":["        vrfAccount.privateKey,"]},{"code":655,"indent":1,"parameters":["        nodeInfo.nodePublicKey,"]},{"code":655,"indent":1,"parameters":["        networkType,"]},{"code":655,"indent":1,"parameters":["    );"]},{"code":655,"indent":1,"parameters":["    transactionList.push(persistentDelegationRequestTransaction.toAggregate(account.publicAccount));"]},{"code":655,"indent":1,"parameters":[""]},{"code":655,"indent":1,"parameters":["    //アグリゲートでまとめる"]},{"code":655,"indent":1,"parameters":["    const aggregateTransaction = symbolSdk.AggregateTransaction.createComplete("]},{"code":655,"indent":1,"parameters":["        symbolSdk.Deadline.create(epochAdjustment),"]},{"code":655,"indent":1,"parameters":["        transactionList,"]},{"code":655,"indent":1,"parameters":["        networkType,"]},{"code":655,"indent":1,"parameters":["        [],"]},{"code":655,"indent":1,"parameters":["    ).setMaxFeeForAggregate(medianFeeMultiplier, 1);"]},{"code":655,"indent":1,"parameters":[""]},{"code":655,"indent":1,"parameters":["    //署名"]},{"code":655,"indent":1,"parameters":["    signedTransaction = account.sign(aggregateTransaction, networkGenerationHash);"]},{"code":655,"indent":1,"parameters":[""]},{"code":655,"indent":1,"parameters":["    transactionRepository.announce(signedTransaction).subscribe((x)=>{"]},{"code":655,"indent":1,"parameters":["        console.log(x)"]},{"code":655,"indent":1,"parameters":["    },(err)=>{console.log(err)});"]},{"code":655,"indent":1,"parameters":[""]},{"code":655,"indent":1,"parameters":["}"]},{"code":250,"indent":1,"parameters":[{"name":"txAnnounce","volume":90,"pitch":100,"pan":0}]},{"code":0,"indent":1,"parameters":[]},{"code":402,"indent":0,"parameters":[1,"いいえ"]},{"code":0,"indent":1,"parameters":[]},{"code":404,"indent":0,"parameters":[]},{"code":0,"indent":0,"parameters":[]}],"moveFrequency":3,"moveRoute":{"list":[{"code":0,"parameters":[]}],"repeat":true,"skippable":false,"wait":false},"moveSpeed":3,"moveType":0,"priorityType":1,"stepAnime":false,"through":false,"trigger":0,"walkAnime":false}],"x":6,"y":13},
{"id":24,"name":"EV024","note":"","pages":[{"conditions":{"actorId":1,"actorValid":false,"itemId":1,"itemValid":false,"selfSwitchCh":"A","selfSwitchValid":false,"switch1Id":28,"switch1Valid":false,"switch2Id":1,"switch2Valid":false,"variableId":1,"variableValid":false,"variableValue":0},"directionFix":true,"image":{"tileId":0,"characterName":"!Crystal","direction":2,"pattern":0,"characterIndex":0},"list":[{"code":101,"indent":0,"parameters":["",0,0,2,""]},{"code":401,"indent":0,"parameters":["ハーベスト停止中"]},{"code":0,"indent":0,"parameters":[]}],"moveFrequency":3,"moveRoute":{"list":[{"code":0,"parameters":[]}],"repeat":true,"skippable":false,"wait":false},"moveSpeed":3,"moveType":0,"priorityType":1,"stepAnime":false,"through":false,"trigger":0,"walkAnime":false},{"conditions":{"actorId":1,"actorValid":false,"itemId":1,"itemValid":false,"selfSwitchCh":"A","selfSwitchValid":false,"switch1Id":28,"switch1Valid":true,"switch2Id":1,"switch2Valid":false,"variableId":1,"variableValid":false,"variableValue":0},"directionFix":true,"image":{"tileId":0,"characterName":"!Crystal","direction":6,"pattern":0,"characterIndex":0},"list":[{"code":250,"indent":0,"parameters":[{"name":"txConfirm","volume":90,"pitch":100,"pan":0}]},{"code":123,"indent":0,"parameters":["A",0]},{"code":0,"indent":0,"parameters":[]}],"moveFrequency":3,"moveRoute":{"list":[{"code":0,"parameters":[]}],"repeat":true,"skippable":false,"wait":false},"moveSpeed":3,"moveType":0,"priorityType":1,"stepAnime":true,"through":false,"trigger":4,"walkAnime":true},{"conditions":{"actorId":1,"actorValid":false,"itemId":1,"itemValid":false,"selfSwitchCh":"A","selfSwitchValid":true,"switch1Id":28,"switch1Valid":true,"switch2Id":1,"switch2Valid":false,"variableId":1,"variableValid":false,"variableValue":0},"directionFix":true,"image":{"tileId":0,"characterName":"!Crystal","direction":6,"pattern":0,"characterIndex":0},"list":[{"code":101,"indent":0,"parameters":["",0,0,2,""]},{"code":401,"indent":0,"parameters":["ハーベスト稼働中"]},{"code":0,"indent":0,"parameters":[]}],"moveFrequency":3,"moveRoute":{"list":[{"code":0,"parameters":[]}],"repeat":true,"skippable":false,"wait":false},"moveSpeed":3,"moveType":0,"priorityType":1,"stepAnime":true,"through":false,"trigger":0,"walkAnime":true}],"x":3,"y":14},
{"id":25,"name":"EV025","note":"","pages":[{"conditions":{"actorId":1,"actorValid":false,"itemId":1,"itemValid":false,"selfSwitchCh":"A","selfSwitchValid":false,"switch1Id":1,"switch1Valid":false,"switch2Id":1,"switch2Valid":false,"variableId":1,"variableValid":false,"variableValue":0},"directionFix":false,"image":{"tileId":0,"characterName":"Nature","direction":8,"pattern":1,"characterIndex":5},"list":[{"code":101,"indent":0,"parameters":["Nature",5,0,2,""]},{"code":401,"indent":0,"parameters":["テストネットでのハーベスト設定が体験できるよ。"]},{"code":401,"indent":0,"parameters":["秘密鍵と委任先ノードのURLを準備してね。"]},{"code":401,"indent":0,"parameters":["\\c[18]テストネット\\c[0]だから注意してね。"]},{"code":401,"indent":0,"parameters":["メインネットの秘密鍵は入れちゃダメだよ。"]},{"code":101,"indent":0,"parameters":["Nature",5,0,2,""]},{"code":401,"indent":0,"parameters":["正しいものかはチェックしてないから気をつけてね。"]},{"code":401,"indent":0,"parameters":["正しくない場合はイベント中にエラーが発生する"]},{"code":401,"indent":0,"parameters":["場合があるよ。"]},{"code":101,"indent":0,"parameters":["",5,0,2,""]},{"code":401,"indent":0,"parameters":["\\c[18]テストネット\\c[0]の秘密鍵を入力してください。"]},{"code":355,"indent":0,"parameters":["// 元々入力されている秘密鍵を退避"]},{"code":655,"indent":0,"parameters":["$gameVariables.setValue(56, $gameVariables.value(54))"]},{"code":357,"indent":0,"parameters":["111_InputForm","show","文字入力の処理",{"target_x":"350","target_y":"200","variables_id":"54","max_count":"300","if_switch_id":"","button_x":"0","button_y":"50","unit_font_size":"24","placeholder":""}]},{"code":657,"indent":0,"parameters":["入力欄のX位置 = 350"]},{"code":657,"indent":0,"parameters":["入力欄のY位置 = 200"]},{"code":657,"indent":0,"parameters":["入力結果の代入先 = 54"]},{"code":657,"indent":0,"parameters":["最大文字数 = 300"]},{"code":657,"indent":0,"parameters":["ONのとき入力を強制終了 = "]},{"code":657,"indent":0,"parameters":["決定ボタンの相対X位置 = 0"]},{"code":657,"indent":0,"parameters":["決定ボタンの相対Y位置 = 50"]},{"code":657,"indent":0,"parameters":["文字サイズ = 24"]},{"code":657,"indent":0,"parameters":["入力欄の初期値 = "]},{"code":355,"indent":0,"parameters":["// なんらかが入力されたかチェック"]},{"code":655,"indent":0,"parameters":["$gameSwitches.setValue(29, false)"]},{"code":655,"indent":0,"parameters":["if($gameVariables.value(54) != 0){"]},{"code":655,"indent":0,"parameters":["    // されてたら会話継続フラグON"]},{"code":655,"indent":0,"parameters":["    $gameSwitches.setValue(29, true)"]},{"code":655,"indent":0,"parameters":["}"]},{"code":111,"indent":0,"parameters":[0,29,1]},{"code":108,"indent":1,"parameters":["入力がなかったら変更前の値をセットして会話終了"]},{"code":355,"indent":1,"parameters":["$gameVariables.setValue(54, $gameVariables.value(56))"]},{"code":115,"indent":1,"parameters":[]},{"code":0,"indent":1,"parameters":[]},{"code":412,"indent":0,"parameters":[]},{"code":101,"indent":0,"parameters":["Nature",5,0,2,""]},{"code":401,"indent":0,"parameters":["登録したよ。"]},{"code":205,"indent":0,"parameters":[0,{"list":[{"code":3,"indent":null},{"code":17,"indent":null},{"code":0}],"repeat":false,"skippable":true,"wait":true}]},{"code":505,"indent":0,"parameters":[{"code":3,"indent":null}]},{"code":505,"indent":0,"parameters":[{"code":17,"indent":null}]},{"code":121,"indent":0,"parameters":[27,27,0]},{"code":0,"indent":0,"parameters":[]}],"moveFrequency":3,"moveRoute":{"list":[{"code":0,"parameters":[]}],"repeat":true,"skippable":false,"wait":false},"moveSpeed":3,"moveType":0,"priorityType":1,"stepAnime":false,"through":false,"trigger":0,"walkAnime":false},{"conditions":{"actorId":1,"actorValid":false,"itemId":1,"itemValid":false,"selfSwitchCh":"A","selfSwitchValid":false,"switch1Id":27,"switch1Valid":true,"switch2Id":1,"switch2Valid":false,"variableId":1,"variableValid":false,"variableValue":0},"directionFix":false,"image":{"characterIndex":0,"characterName":"","direction":2,"pattern":0,"tileId":0},"list":[{"code":0,"indent":0,"parameters":[]}],"moveFrequency":3,"moveRoute":{"list":[{"code":0,"parameters":[]}],"repeat":true,"skippable":false,"wait":false},"moveSpeed":3,"moveType":0,"priorityType":0,"stepAnime":false,"through":false,"trigger":0,"walkAnime":true}],"x":10,"y":13},
{"id":26,"name":"EV026","note":"","pages":[{"conditions":{"actorId":1,"actorValid":false,"itemId":1,"itemValid":false,"selfSwitchCh":"A","selfSwitchValid":false,"switch1Id":1,"switch1Valid":false,"switch2Id":1,"switch2Valid":false,"variableId":1,"variableValid":false,"variableValue":0},"directionFix":false,"image":{"tileId":0,"characterName":"Nature","direction":6,"pattern":1,"characterIndex":5},"list":[{"code":101,"indent":0,"parameters":["Nature",5,0,2,""]},{"code":401,"indent":0,"parameters":["このクリスタルはハーベストの稼働状態を表して"]},{"code":401,"indent":0,"parameters":["いるよ。"]},{"code":401,"indent":0,"parameters":["赤色の時はハーベスト停止中、紫色の時はハーベスト"]},{"code":401,"indent":0,"parameters":["稼働中だよ。"]},{"code":0,"indent":0,"parameters":[]}],"moveFrequency":3,"moveRoute":{"list":[{"code":0,"parameters":[]}],"repeat":true,"skippable":false,"wait":false},"moveSpeed":3,"moveType":0,"priorityType":1,"stepAnime":false,"through":false,"trigger":0,"walkAnime":true}],"x":3,"y":15},
{"id":27,"name":"EV027","note":"","pages":[{"conditions":{"actorId":1,"actorValid":false,"itemId":1,"itemValid":false,"selfSwitchCh":"A","selfSwitchValid":false,"switch1Id":27,"switch1Valid":true,"switch2Id":1,"switch2Valid":false,"variableId":1,"variableValid":false,"variableValue":0},"directionFix":false,"image":{"tileId":0,"characterName":"Nature","direction":4,"pattern":1,"characterIndex":5},"list":[{"code":101,"indent":0,"parameters":["Nature",5,0,2,""]},{"code":401,"indent":0,"parameters":["\\c[18]テストネット\\c[0]の秘密鍵を登録し直す？"]},{"code":401,"indent":0,"parameters":["メインネットの秘密鍵は入れちゃダメだよ。"]},{"code":401,"indent":0,"parameters":["正しいものかはチェックしてないから気をつけてね。"]},{"code":401,"indent":0,"parameters":["正しくない場合はイベント中にエラーが発生するよ。"]},{"code":102,"indent":0,"parameters":[["はい","いいえ"],1,0,2,0]},{"code":402,"indent":0,"parameters":[0,"はい"]},{"code":355,"indent":1,"parameters":["// 元々入力されている秘密鍵を退避"]},{"code":655,"indent":1,"parameters":["$gameVariables.setValue(56, $gameVariables.value(54))"]},{"code":357,"indent":1,"parameters":["111_InputForm","show","文字入力の処理",{"target_x":"350","target_y":"200","variables_id":"54","max_count":"300","if_switch_id":"","button_x":"0","button_y":"50","unit_font_size":"24","placeholder":""}]},{"code":657,"indent":1,"parameters":["入力欄のX位置 = 350"]},{"code":657,"indent":1,"parameters":["入力欄のY位置 = 200"]},{"code":657,"indent":1,"parameters":["入力結果の代入先 = 54"]},{"code":657,"indent":1,"parameters":["最大文字数 = 300"]},{"code":657,"indent":1,"parameters":["ONのとき入力を強制終了 = "]},{"code":657,"indent":1,"parameters":["決定ボタンの相対X位置 = 0"]},{"code":657,"indent":1,"parameters":["決定ボタンの相対Y位置 = 50"]},{"code":657,"indent":1,"parameters":["文字サイズ = 24"]},{"code":657,"indent":1,"parameters":["入力欄の初期値 = "]},{"code":355,"indent":1,"parameters":["// なんらかが入力されたかチェック"]},{"code":655,"indent":1,"parameters":["$gameSwitches.setValue(29, false)"]},{"code":655,"indent":1,"parameters":["if($gameVariables.value(54) != 0){"]},{"code":655,"indent":1,"parameters":["    // されてたら会話継続フラグON"]},{"code":655,"indent":1,"parameters":["    $gameSwitches.setValue(29, true)"]},{"code":655,"indent":1,"parameters":["}"]},{"code":111,"indent":1,"parameters":[0,29,1]},{"code":108,"indent":2,"parameters":["入力がなかったら変更前の値をセットして会話終了"]},{"code":355,"indent":2,"parameters":["$gameVariables.setValue(54, $gameVariables.value(56))"]},{"code":115,"indent":2,"parameters":[]},{"code":0,"indent":2,"parameters":[]},{"code":412,"indent":1,"parameters":[]},{"code":101,"indent":1,"parameters":["Nature",5,0,2,""]},{"code":401,"indent":1,"parameters":["登録したよ。"]},{"code":0,"indent":1,"parameters":[]},{"code":402,"indent":0,"parameters":[1,"いいえ"]},{"code":115,"indent":1,"parameters":[]},{"code":0,"indent":1,"parameters":[]},{"code":404,"indent":0,"parameters":[]},{"code":0,"indent":0,"parameters":[]}],"moveFrequency":3,"moveRoute":{"list":[{"code":0,"parameters":[]}],"repeat":true,"skippable":false,"wait":false},"moveSpeed":3,"moveType":0,"priorityType":1,"stepAnime":false,"through":false,"trigger":0,"walkAnime":true}],"x":11,"y":13},
{"id":28,"name":"EV028","note":"","pages":[{"conditions":{"actorId":1,"actorValid":false,"itemId":1,"itemValid":false,"selfSwitchCh":"A","selfSwitchValid":false,"switch1Id":1,"switch1Valid":false,"switch2Id":1,"switch2Valid":false,"variableId":1,"variableValid":false,"variableValue":0},"directionFix":false,"image":{"characterIndex":0,"characterName":"","direction":2,"pattern":0,"tileId":0},"list":[{"code":355,"indent":0,"parameters":["if($gameVariables.value(54)){"]},{"code":655,"indent":0,"parameters":["    hervestCheck()"]},{"code":655,"indent":0,"parameters":["}"]},{"code":655,"indent":0,"parameters":[""]},{"code":655,"indent":0,"parameters":["async function hervestCheck () {"]},{"code":655,"indent":0,"parameters":["    const symbolSdk = await require('/node_modules/symbol-sdk');"]},{"code":655,"indent":0,"parameters":[""]},{"code":655,"indent":0,"parameters":["    // 情報取得のために接続するノード"]},{"code":655,"indent":0,"parameters":["    const node = \"https://sym-test-01.opening-line.jp:3001\";"]},{"code":655,"indent":0,"parameters":["    const networkType = symbolSdk.NetworkType.TEST_NET;"]},{"code":655,"indent":0,"parameters":[""]},{"code":655,"indent":0,"parameters":["    const repositoryFactory = new symbolSdk.RepositoryFactoryHttp(node);"]},{"code":655,"indent":0,"parameters":["    const accountRepository = repositoryFactory.createAccountRepository();"]},{"code":655,"indent":0,"parameters":[""]},{"code":655,"indent":0,"parameters":["    const privateKey = $gameVariables.value(54); // ツクールで取得用"]},{"code":655,"indent":0,"parameters":[""]},{"code":655,"indent":0,"parameters":["    const account = symbolSdk.Account.createFromPrivateKey(privateKey, networkType);"]},{"code":655,"indent":0,"parameters":["    const accountInfo = await accountRepository.getAccountInfo(account.address).toPromise();"]},{"code":655,"indent":0,"parameters":[""]},{"code":655,"indent":0,"parameters":[""]},{"code":655,"indent":0,"parameters":["    console.log(accountInfo.supplementalPublicKeys.linked)"]},{"code":655,"indent":0,"parameters":[""]},{"code":655,"indent":0,"parameters":["    let linkCount = 0;"]},{"code":655,"indent":0,"parameters":["    if (accountInfo.supplementalPublicKeys.linked) {"]},{"code":655,"indent":0,"parameters":["        linkCount++;"]},{"code":655,"indent":0,"parameters":["    }"]},{"code":655,"indent":0,"parameters":[""]},{"code":655,"indent":0,"parameters":["    if (accountInfo.supplementalPublicKeys.vrf) {"]},{"code":655,"indent":0,"parameters":["        linkCount++;"]},{"code":655,"indent":0,"parameters":["    }"]},{"code":655,"indent":0,"parameters":[""]},{"code":655,"indent":0,"parameters":["    if (accountInfo.supplementalPublicKeys.node) {"]},{"code":655,"indent":0,"parameters":["        linkCount++;"]},{"code":655,"indent":0,"parameters":["    }"]},{"code":655,"indent":0,"parameters":[""]},{"code":655,"indent":0,"parameters":["    if (linkCount === 3) {"]},{"code":655,"indent":0,"parameters":["        // リンクされていたらハーベスト中フラグオン"]},{"code":655,"indent":0,"parameters":["        $gameSwitches.setValue(28, true)"]},{"code":655,"indent":0,"parameters":["    } else {"]},{"code":655,"indent":0,"parameters":["        $gameSwitches.setValue(28, false)"]},{"code":655,"indent":0,"parameters":["    }"]},{"code":655,"indent":0,"parameters":["}"]},{"code":230,"indent":0,"parameters":[300]},{"code":0,"indent":0,"parameters":[]}],"moveFrequency":3,"moveRoute":{"list":[{"code":0,"parameters":[]}],"repeat":true,"skippable":false,"wait":false},"moveSpeed":3,"moveType":0,"priorityType":0,"stepAnime":false,"through":false,"trigger":4,"walkAnime":true}],"x":17,"y":14},
{"id":29,"name":"EV029","note":"","pages":[{"conditions":{"actorId":1,"actorValid":false,"itemId":1,"itemValid":false,"selfSwitchCh":"A","selfSwitchValid":false,"switch1Id":1,"switch1Valid":false,"switch2Id":1,"switch2Valid":false,"variableId":1,"variableValid":false,"variableValue":0},"directionFix":false,"image":{"tileId":0,"characterName":"Nature","direction":2,"pattern":1,"characterIndex":5},"list":[{"code":101,"indent":0,"parameters":["Nature",5,0,2,""]},{"code":401,"indent":0,"parameters":["ハーベスト設定中の場合は解除ができるよ。"]},{"code":401,"indent":0,"parameters":["解除する？"]},{"code":102,"indent":0,"parameters":[["はい","いいえ"],1,0,2,0]},{"code":402,"indent":0,"parameters":[0,"はい"]},{"code":355,"indent":1,"parameters":["hervestUnLink()"]},{"code":655,"indent":1,"parameters":[""]},{"code":655,"indent":1,"parameters":["async function hervestUnLink (){"]},{"code":655,"indent":1,"parameters":["    const symbolSdk = await require('/node_modules/symbol-sdk');"]},{"code":655,"indent":1,"parameters":[""]},{"code":655,"indent":1,"parameters":["    // 情報取得のために接続するノード"]},{"code":655,"indent":1,"parameters":["    const node = \"https://sym-test-01.opening-line.jp:3001\";"]},{"code":655,"indent":1,"parameters":["    const networkType = symbolSdk.NetworkType.TEST_NET;"]},{"code":655,"indent":1,"parameters":[""]},{"code":655,"indent":1,"parameters":["    const repositoryFactory = new symbolSdk.RepositoryFactoryHttp(node);"]},{"code":655,"indent":1,"parameters":["    const transactionRepository = repositoryFactory.createTransactionRepository();"]},{"code":655,"indent":1,"parameters":["    const networkRepository = repositoryFactory.createNetworkRepository();"]},{"code":655,"indent":1,"parameters":["    const accountRepository = repositoryFactory.createAccountRepository();"]},{"code":655,"indent":1,"parameters":["    let networkGenerationHash = null;"]},{"code":655,"indent":1,"parameters":["    let medianFeeMultiplier = null;"]},{"code":655,"indent":1,"parameters":["    let epochAdjustment = null;"]},{"code":655,"indent":1,"parameters":["    let signedTransaction = null;"]},{"code":655,"indent":1,"parameters":[""]},{"code":655,"indent":1,"parameters":["    // GenerationHashの取得"]},{"code":655,"indent":1,"parameters":["    networkGenerationHash = await repositoryFactory.getGenerationHash().toPromise();"]},{"code":655,"indent":1,"parameters":["    // 最小手数料係数を取得"]},{"code":655,"indent":1,"parameters":["    medianFeeMultiplier = (await networkRepository.getTransactionFees().toPromise()).medianFeeMultiplier;"]},{"code":655,"indent":1,"parameters":["    "]},{"code":655,"indent":1,"parameters":["    // ハーベスト解除を行うメインアカウント"]},{"code":655,"indent":1,"parameters":["    const privateKey = $gameVariables.value(54); // ツクールで取得用"]},{"code":655,"indent":1,"parameters":["    "]},{"code":655,"indent":1,"parameters":["    const account = symbolSdk.Account.createFromPrivateKey(privateKey, networkType);"]},{"code":655,"indent":1,"parameters":["    const accountInfo = await accountRepository.getAccountInfo(account.address).toPromise();"]},{"code":655,"indent":1,"parameters":[""]},{"code":655,"indent":1,"parameters":["    let transactionList = [];"]},{"code":655,"indent":1,"parameters":[""]},{"code":655,"indent":1,"parameters":["    // epochAdjustmentの取得"]},{"code":655,"indent":1,"parameters":["    epochAdjustment = await repositoryFactory.getEpochAdjustment().toPromise();"]},{"code":655,"indent":1,"parameters":[""]},{"code":655,"indent":1,"parameters":["    //委任しているようであれば解除トランザクション作成"]},{"code":655,"indent":1,"parameters":["    if(accountInfo.supplementalPublicKeys.linked){"]},{"code":655,"indent":1,"parameters":["        //AccountKeyLinkTransaction （解除）"]},{"code":655,"indent":1,"parameters":["        const accountUnLinkTransaction = symbolSdk.AccountKeyLinkTransaction.create("]},{"code":655,"indent":1,"parameters":["            symbolSdk.Deadline.create(epochAdjustment),"]},{"code":655,"indent":1,"parameters":["            accountInfo.supplementalPublicKeys.linked.publicKey,"]},{"code":655,"indent":1,"parameters":["            symbolSdk.LinkAction.Unlink,"]},{"code":655,"indent":1,"parameters":["            networkType,"]},{"code":655,"indent":1,"parameters":["        );"]},{"code":655,"indent":1,"parameters":["        transactionList.push(accountUnLinkTransaction.toAggregate(account.publicAccount));"]},{"code":655,"indent":1,"parameters":["    }"]},{"code":655,"indent":1,"parameters":[""]},{"code":655,"indent":1,"parameters":["    if(accountInfo.supplementalPublicKeys.vrf){"]},{"code":655,"indent":1,"parameters":["        //VrfKeyLinkTransaction （解除）"]},{"code":655,"indent":1,"parameters":["        const vrfUnLinkTransaction = symbolSdk.VrfKeyLinkTransaction.create("]},{"code":655,"indent":1,"parameters":["            symbolSdk.Deadline.create(epochAdjustment),"]},{"code":655,"indent":1,"parameters":["            accountInfo.supplementalPublicKeys.vrf.publicKey,"]},{"code":655,"indent":1,"parameters":["            symbolSdk.LinkAction.Unlink,"]},{"code":655,"indent":1,"parameters":["            networkType,"]},{"code":655,"indent":1,"parameters":["        );"]},{"code":655,"indent":1,"parameters":["        transactionList.push(vrfUnLinkTransaction.toAggregate(account.publicAccount));"]},{"code":655,"indent":1,"parameters":["    }"]},{"code":655,"indent":1,"parameters":[""]},{"code":655,"indent":1,"parameters":["    if(accountInfo.supplementalPublicKeys.node){"]},{"code":655,"indent":1,"parameters":["        //NodeKeyLinkTransaction （解除）"]},{"code":655,"indent":1,"parameters":["        const nodeUnLinkTransaction = symbolSdk.NodeKeyLinkTransaction.create("]},{"code":655,"indent":1,"parameters":["            symbolSdk.Deadline.create(epochAdjustment),"]},{"code":655,"indent":1,"parameters":["            accountInfo.supplementalPublicKeys.node.publicKey,"]},{"code":655,"indent":1,"parameters":["            symbolSdk.LinkAction.Unlink,"]},{"code":655,"indent":1,"parameters":["            networkType,"]},{"code":655,"indent":1,"parameters":["        );"]},{"code":655,"indent":1,"parameters":["        transactionList.push(nodeUnLinkTransaction.toAggregate(account.publicAccount));"]},{"code":655,"indent":1,"parameters":["    }"]},{"code":655,"indent":1,"parameters":["    "]},{"code":655,"indent":1,"parameters":["    //アグリゲートでまとめる"]},{"code":655,"indent":1,"parameters":["    const aggregateTransaction = symbolSdk.AggregateTransaction.createComplete("]},{"code":655,"indent":1,"parameters":["        symbolSdk.Deadline.create(epochAdjustment),"]},{"code":655,"indent":1,"parameters":["        transactionList,"]},{"code":655,"indent":1,"parameters":["        networkType,"]},{"code":655,"indent":1,"parameters":["        [],"]},{"code":655,"indent":1,"parameters":["    ).setMaxFeeForAggregate(medianFeeMultiplier, 1);"]},{"code":655,"indent":1,"parameters":[""]},{"code":655,"indent":1,"parameters":["    //署名"]},{"code":655,"indent":1,"parameters":["    signedTransaction = account.sign(aggregateTransaction, networkGenerationHash);"]},{"code":655,"indent":1,"parameters":[""]},{"code":655,"indent":1,"parameters":["    transactionRepository.announce(signedTransaction).subscribe((x)=>{"]},{"code":655,"indent":1,"parameters":["        console.log(x)"]},{"code":655,"indent":1,"parameters":["    },(err)=>{console.log(err)});"]},{"code":655,"indent":1,"parameters":[""]},{"code":655,"indent":1,"parameters":["}"]},{"code":0,"indent":1,"parameters":[]},{"code":402,"indent":0,"parameters":[1,"いいえ"]},{"code":0,"indent":1,"parameters":[]},{"code":404,"indent":0,"parameters":[]},{"code":0,"indent":0,"parameters":[]}],"moveFrequency":3,"moveRoute":{"list":[{"code":0,"parameters":[]}],"repeat":true,"skippable":false,"wait":false},"moveSpeed":3,"moveType":0,"priorityType":1,"stepAnime":false,"through":false,"trigger":0,"walkAnime":false}],"x":5,"y":13}
]
}